<div dir="rtl">

# نقاشی بکش لویی (بخش دوم) - تمرین دستگرمی سوم برنامه نویسی وب

<p align="center">
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/42/Sharif-University-of-Technology.jpg" alt="لوگوی دانشگاه صنعتی شریف" width="200">
</p>

<p align="center">
  <b>دانشگاه صنعتی شریف</b><br>
  دانشکده مهندسی کامپیوتر<br>
  درس برنامه‌نویسی وب - بهار ۱۴۰۴
  <br>استاد درس: دکتر یحیی پورسلطانی
</p>

<p align="center">
  <b>علی هاشمیان</b><br>
  شماره دانشجویی: ۴۰۱۱۰۶۶۸۵
</p>

---

### ۱. قابلیت‌های کلیدی برنامه

*   امکان طراحی نقاشی با کشیدن و رها کردن (drag & drop) اشکال از نوار ابزار.
*   قابلیت جابجایی اشکال کشیده شده در هر نقطه از بوم طراحی.
*   حذف یک شکل با دو بار کلیک کردن (double-click) بر روی آن.
*   امکان ویرایش و تغییر عنوان نقاشی به صورت مستقیم در هدر برنامه.
*   وجود شمارشگر زنده برای نمایش تعداد هر یک از اشکال موجود.
*   پیاده‌سازی یک سرور بک‌اند با Spring Boot جهت مدیریت کامل داده‌ها.
*   قابلیت تفکیک کاربران و ذخیره یک نقاشی منحصر به فرد برای هر کاربر.
*   ذخیره‌سازی دائمی داده‌ها در یک پایگاه داده H2 مبتنی بر فایل.
*   بارگذاری خودکار نقاشی کاربر از سرور با انتخاب او از منوی dropdown.
*   ذخیره وضعیت فعلی نقاشی روی سرور از طریق یک API با متد PUT.
*   استفاده از فرمت JSON برای ذخیره‌سازی ساختاریافته اطلاعات اشکال در دیتابیس.
*   ایجاد خودکار کاربران پیش‌فرض هنگام راه‌اندازی سرور برای سهولت در تست.




### ۲. نحوه عملکرد کلی سیستم

*   فرانت‌اند برنامه که با React توسعه داده شده، مسئولیت کامل رابط کاربری را بر عهده دارد و تمام تعاملات کاربر، از جمله drag & drop اشکال و کلیک روی دکمه‌ها را مدیریت می‌کند.

*   ارتباط بین دو بخش از طریق درخواست‌های HTTP به یک REST API برقرار می‌شود. این درخواست‌ها در فرانت‌اند، به طور متمرکز در فایل `PaintingContext.tsx` و با استفاده از تابع `fetch` ارسال می‌شوند.

*   بک‌اند که با Spring Boot پیاده‌سازی شده، این درخواست‌ها را از طریق یک `RestController` دریافت می‌کند و بر اساس نوع درخواست (GET برای خواندن و PUT برای نوشتن)، اندپوینت (endpoint) مربوطه فعال می‌شود.

*   پس از دریافت داده، بک‌اند منطق برنامه را اجرا می‌کند؛ برای مثال، اطلاعات نقاشی را به فرمت JSON تبدیل کرده و در دیتابیس H2 ذخیره می‌کند. این فرآیند با کمک لایه‌های Service و Repository مدیریت می‌شود تا کد تمیز و قابل نگهداری باشد.


### ۳. پیاده‌سازی و شرح کد

بخش سرور با استفاده از یک معماری لایه‌ای استاندارد در فریمورک Spring Boot توسعه داده شده است. در ادامه، نقش هر یک از فایل‌های کلیدی در این معماری شرح داده می‌شود:

*   **`PaintingController.java` (لایه API):**
    این کلاس به عنوان دروازه ورودی برنامه عمل می‌کند. مسئولیت آن دریافت درخواست‌های HTTP از فرانت‌اند، تعریف اندپوینت‌های API (مانند `/api/painting/{username}`) و فراخوانی لایه سرویس است.

*   **`PaintingService.java` (لایه منطق برنامه):**
    این کلاس مغز اصلی برنامه است و منطق تجاری در آن پیاده‌سازی شده. وظایفی مانند ارتباط با Repository، تبدیل اطلاعات اشکال به فرمت JSON برای ذخیره‌سازی، و آماده‌سازی داده برای ارسال به فرانت‌اند را بر عهده دارد.

*   **`User.java` و `Painting.java` (لایه مدل):**
    این دو کلاس، موجودیت‌های (Entities) اصلی ما هستند و با استفاده از انوتیشن‌های JPA، ساختار جداول `users` و `painting` را در پایگاه داده تعریف می‌کنند.

*   **`UserRepository.java` و `PaintingRepository.java` (لایه دسترسی به داده):**
    این اینترفیس‌ها با ارث‌بری از `JpaRepository`، به ما اجازه می‌دهند تا بدون نوشتن حتی یک خط کد SQL، عملیات اصلی دیتابیس مانند ذخیره (`save`), خواندن (`find`) و حذف را انجام دهیم.

*   **`PaintingDto.java` و `ShapeDto.java` (اشیاء انتقال داده):**
    این کلاس‌ها به عنوان Data Transfer Objects (DTO) عمل می‌کنند و ساختار داده‌ای که بین فرانت‌اند و بک‌اند رد و بدل می‌شود را مشخص می‌کنند. این کار باعث جداسازی مدل داخلی دیتابیس از مدلی که به API نمایش داده می‌شود، می‌گردد.

*   **`WebConfig.java` (پیکربندی):**
    این فایل برای پیکربندی CORS استفاده شده است. به سرور اجازه می‌دهد تا درخواست‌هایی که از مبدأ فرانت‌اند (پورت `5173`) می‌آیند را بپذیرد و مسدود نکند.

*   **`DataLoader.java` (ابزار راه‌اندازی):**
    این کلاس یک ابزار کمکی است که تنها یک بار هنگام راه‌اندازی اولیه برنامه اجرا می‌شود و وظیفه دارد تا کاربران پیش‌فرض را در دیتابیس ایجاد کند تا برنامه برای تست آماده باشد.

    
### ۴. چالش‌ها و تصمیمات طراحی


### ۵. استفاده از هوش مصنوعی در پروژه

در این تمرین، از ابزارهای هوش مصنوعی (AI) به عنوان یک **دستیار برنامه‌نویس (AI Assistant)** و نه به عنوان انجام‌دهنده کامل پروژه، استفاده شد. نحوه استفاده، مزایا و معایب آن در ادامه شرح داده می‌شود.

#### نحوه استفاده


#### مزایا


#### معایب و چالش‌ها


</div>
